<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PST Countdown Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .time-display {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin: 10px 0;
        }
        .countdown {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 10px 0;
        }
        .time-unit {
            background: #000;
            color: #fff;
            padding: 8px 12px;
            border-radius: 4px;
            font-weight: bold;
        }
        .comparison {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        .timezone {
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .utc { background: #e3f2fd; }
        .pst { background: #e8f5e8; }
        .est { background: #fff3e0; }
    </style>
</head>
<body>
    <h1>üïê PST Countdown Timer Test</h1>
    
    <div class="test-section">
        <h2>Current Time Comparison</h2>
        <div class="comparison">
            <div class="timezone utc">
                <h3>UTC</h3>
                <div class="time-display" id="utc-time">--</div>
                <div id="utc-date">--</div>
            </div>
            <div class="timezone pst">
                <h3>PST (Pacific)</h3>
                <div class="time-display" id="pst-time">--</div>
                <div id="pst-date">--</div>
            </div>
            <div class="timezone est">
                <h3>EST (Eastern)</h3>
                <div class="time-display" id="est-time">--</div>
                <div id="est-date">--</div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>Next Launch Countdown (8 AM PST)</h2>
        <div class="countdown">
            <span>Next launch in:</span>
            <span class="time-unit" id="days">0d</span>
            <span class="time-unit" id="hours">0h</span>
            <span class="time-unit" id="minutes">0m</span>
            <span class="time-unit" id="seconds">0s</span>
        </div>
        <div id="next-launch-info">--</div>
        <div id="weekend-status">--</div>
    </div>

    <div class="test-section">
        <h2>8 AM PST Check</h2>
        <div id="8am-check">--</div>
        <div id="weekday-check">--</div>
    </div>

    <script>
        // PST countdown logic matching the updated components
        const getNextLaunchDate = () => {
            const now = new Date();
            const pstNow = new Date(now.toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
            
            let nextDate = new Date(pstNow);
            
            // If it's before 8 AM today and it's a weekday, launch is today at 8 AM PST
            if (pstNow.getHours() < 8) {
                nextDate.setHours(8, 0, 0, 0);
                const dayOfWeek = nextDate.getDay(); // 0 = Sunday, 1 = Monday, etc.
                
                // If today is a weekday, use today
                if (dayOfWeek >= 1 && dayOfWeek <= 5) {
                    return nextDate;
                }
            }
            
            // Otherwise, find the next weekday at 8 AM PST
            nextDate.setDate(pstNow.getDate() + 1);
            nextDate.setHours(8, 0, 0, 0);
            
            // Keep incrementing until we hit a weekday
            while (true) {
                const dayOfWeek = nextDate.getDay();
                
                // If it's a weekday (Monday = 1 through Friday = 5), we found our date
                if (dayOfWeek >= 1 && dayOfWeek <= 5) {
                    break;
                }
                
                // Otherwise, move to next day
                nextDate.setDate(nextDate.getDate() + 1);
            }
            
            return nextDate;
        };

        const checkIfWeekend = () => {
            const now = new Date();
            const pstNow = new Date(now.toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
            const dayOfWeek = pstNow.getDay(); // 0 = Sunday, 6 = Saturday
            
            return dayOfWeek === 0 || dayOfWeek === 6;
        };

        const calculateTimeLeft = () => {
            const now = new Date();
            const pstNow = new Date(now.toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
            const target = getNextLaunchDate();
            
            const difference = target.getTime() - pstNow.getTime();
            
            if (difference > 0) {
                return {
                    days: Math.floor(difference / (1000 * 60 * 60 * 24)),
                    hours: Math.floor((difference / (1000 * 60 * 60)) % 24),
                    minutes: Math.floor((difference / 1000 / 60) % 60),
                    seconds: Math.floor((difference / 1000) % 60)
                };
            }
            
            return { days: 0, hours: 0, minutes: 0, seconds: 0 };
        };

        const updateDisplay = () => {
            const now = new Date();
            const utcTime = now.toISOString();
            const pstTime = new Date(now.toLocaleString('en-US', {timeZone: 'America/Los_Angeles'}));
            const estTime = new Date(now.toLocaleString('en-US', {timeZone: 'America/New_York'}));
            
            // Update time displays
            document.getElementById('utc-time').textContent = utcTime.split('T')[1].split('.')[0];
            document.getElementById('utc-date').textContent = utcTime.split('T')[0];
            
            document.getElementById('pst-time').textContent = pstTime.toLocaleTimeString('en-US');
            document.getElementById('pst-date').textContent = pstTime.toLocaleDateString('en-US');
            
            document.getElementById('est-time').textContent = estTime.toLocaleTimeString('en-US');
            document.getElementById('est-date').textContent = estTime.toLocaleDateString('en-US');
            
            // Update countdown
            const timeLeft = calculateTimeLeft();
            document.getElementById('days').textContent = `${timeLeft.days}d`;
            document.getElementById('hours').textContent = `${timeLeft.hours}h`;
            document.getElementById('minutes').textContent = `${timeLeft.minutes}m`;
            document.getElementById('seconds').textContent = `${timeLeft.seconds}s`;
            
            // Update next launch info
            const nextLaunch = getNextLaunchDate();
            document.getElementById('next-launch-info').textContent = 
                `Next launch: ${nextLaunch.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })} at ${nextLaunch.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })} PST`;
            
            // Update weekend status
            const isWeekend = checkIfWeekend();
            document.getElementById('weekend-status').textContent = isWeekend ? 'üèñÔ∏è Weekend - No launches' : 'üìÖ Weekday - Launches available';
            
            // Update 8 AM check
            const pstHour = pstTime.getHours();
            document.getElementById('8am-check').textContent = 
                pstHour < 8 ? '‚úÖ Before 8 AM PST - Today could be launch day!' : '‚è∞ After 8 AM PST - Next launch tomorrow';
            
            // Update weekday check
            const pstDay = pstTime.getDay();
            const isWeekday = pstDay >= 1 && pstDay <= 5;
            document.getElementById('weekday-check').textContent = 
                isWeekday ? '‚úÖ Weekday - Launch day!' : 'üèñÔ∏è Weekend - No launches';
        };

        // Update every second
        updateDisplay();
        setInterval(updateDisplay, 1000);
    </script>
</body>
</html>
